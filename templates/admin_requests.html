<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
        <title>Swap Requests</title>
    </head>
    <body>
        <header class="header">
          <div class="logo">
            <img src="{{ url_for('static', filename='images/Multimedia_University_logo.png')}}" alt="MMU Logo">
            <img src="{{url_for('static', filename='images/tukar_logo.png') }}" alt="Tukar Logo">
        </div>
            <nav class="navbar">
                <a href="{{ url_for('main.index') }}">Home</a>
                <a href="{{ url_for('main.dashboard') }}">Dashboard</a> 
                <a href="#">Notification</a>
                <a href="{{ url_for('main.logout') }}">Logout</a> 
                
            </nav>
            
        </header>
        
        <div class="section">
            <h2>Swap Requests</h2>
        </div>
        <div class="nav-wrapper">
            <div class="nav-icon">‚ò∞</div>
            <nav class="sidebar">
              <ul>
                <li><a href="#">Dashboard</a></li>
                <li><a href="#">Requests</a></li>
                <li><a href="#">Students</a></li>
                <li><a href="#">Settings</a></li>
              </ul>
            </nav>
          </div>
          

          <div class="table-controls">
            <form method="GET" action="/admin/requests" style="display: flex; gap: 1rem;">
            <!-- Search Bar -->
            <div class="search-container">
              <input type="text" id="search-input" name="search" placeholder="Search..." value="{{search}}"   >
              <span class="search-icon">üîç</span>
            </div>
          
            <!-- Status Filter -->
            <div class="filter-container">
              <select id="status-filter" name="status">
                <option value="all" {% if status == 'all' %}selected{% endif %}>Filter Status</option>
                <option value="pending" {% if status == 'pending'%}selected{% endif %} >Pending</option>
                <option value="approved" {% if status == 'approved' %}selected{% endif %}   >Approved</option>
                <option value="rejected" {% if status == 'rejected' %}selected{% endif %}>Rejected</option>
              </select>
            </div>
        
            <button type="submit">Apply</button>
        </form>
    </div>
         

        <table class="table" border="1">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Current Hostel</th>
                    <th>Desired Hostel</th>
                    <th>Room Type</th>
                    <th>Status</th>
                    <th>Created At</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for req in requests %}
                <tr>
                    <td>{{ req.name }}</td>
                    <td>{{ req.current }}</td>
                    <td>{{ req.desired }}</td>
                    <td>{{ req.type }}</td>
                    <td class="status">
                        {% if req.status == "pending" %}
                            <span class="status-pending">‚è≥Pending</span>
                        {% elif req.status == "approved" %}
                            <span class="status-approved">‚úÖ Approved</span>
                        {% else %}
                            <span class="status-rejected">‚ùå Rejected</span>
                        {% endif %}
                    </td>
                    <td>{{ req.date }}</td>
                    <td class="actions">
                        {% if req.status == 'pending' %}
                            
                        <form method="POST" action="{{ url_for('main.approve_request') }}" style="display:inline;">
                            <input type="hidden" name="name" value="{{ req.name }}">
                            <button type="submit" class="btn-approve" >Approve</button>
                        </form>
                        <form action="{{ url_for('main.reject_request') }}" method="POST" style="display:inline;">
                            <input type="hidden" name="name" value="{{ req.name }}">
                            <button type="submit" class="btn-reject">Reject</button>
                        </form>
                        {% else %}
                <button class="btn-approve" disabled>Approve</button>
                <button class="btn-reject" disabled>Reject</button>
                {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <footer>
          <div class="footer-col">
              <ul>
              <div class="logo">
              <img src="{{url_for('static', filename='images/tukar_logo.png') }}" alt="Tukar Logo"></div>
                  <li><p>&copy; 2025 Tukar-Je. ALL RIGHTS RESERVED</p></li>
              </ul>
          </div>
          <div class="footer-col">
              <h4>Quick Links</h4>
              <ul>
                  <li><a href="">About</a></li>
                  <li><a href="https://www.mmu.edu.my/accommodation/">Accomodation</a></li>
                  <li><a href="https://online.mmu.edu.my/">Portal</a></li>
              </ul>
          </div>
          <div class="footer-col">
              <h4>Contact Us</h4>
              <ul>
                  <li><a href="#">tukarje@gmail.com</a></li>
              </ul>
          </div> 
      </footer>
    </body>
</html>